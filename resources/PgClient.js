"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.executeQuery = void 0;
const pg_1 = require("pg");
const dbConfig = {
    host: process.env["DB_HOST"],
    user: process.env["DB_USER"],
    password: process.env["DB_PASSWORD"],
    database: process.env["DB_DATABASE"],
    port: parseInt(process.env["DB_PORT"])
};
async function executeQuery(query) {
    const client = new pg_1.Client(dbConfig);
    try {
        await client.connect();
        const result = await client.query(query);
        return result;
    }
    catch (e) {
        throw e;
    }
    finally {
        await client.end();
    }
}
exports.executeQuery = executeQuery;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGdDbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQZ0NsaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQkFBNEI7QUFFNUIsTUFBTSxRQUFRLEdBQUc7SUFDYixJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUU7SUFDN0IsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFFO0lBQzdCLFFBQVEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBRTtJQUNyQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUU7SUFDckMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBRSxDQUFDO0NBQzFDLENBQUM7QUFFSyxLQUFLLFVBQVUsWUFBWSxDQUFDLEtBQWE7SUFFNUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxXQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFcEMsSUFBSSxDQUFDO1FBQ0QsTUFBTSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdkIsTUFBTSxNQUFNLEdBQUcsTUFBTSxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1QsTUFBTSxDQUFDLENBQUM7SUFDWixDQUFDO1lBQVMsQ0FBQztRQUNQLE1BQU0sTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7QUFDTCxDQUFDO0FBYkQsb0NBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwicGdcIjtcclxuXHJcbmNvbnN0IGRiQ29uZmlnID0ge1xyXG4gICAgaG9zdDogcHJvY2Vzcy5lbnZbXCJEQl9IT1NUXCJdISxcclxuICAgIHVzZXI6IHByb2Nlc3MuZW52W1wiREJfVVNFUlwiXSEsXHJcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnZbXCJEQl9QQVNTV09SRFwiXSEsXHJcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnZbXCJEQl9EQVRBQkFTRVwiXSEsXHJcbiAgICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudltcIkRCX1BPUlRcIl0hKVxyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeShxdWVyeTogc3RyaW5nKSB7XHJcbiAgICBcclxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoZGJDb25maWcpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkocXVlcnkpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgYXdhaXQgY2xpZW50LmVuZCgpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==